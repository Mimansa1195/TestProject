var morrisBarConfig = { element: "", data: [], hideHover: "auto", gridEnabled: !0, resize: !0 }; $(function () { $(".main-container").on("scroll", function () { var a = $(".main-container").scrollLeft(); $("#tblTimeTable tr td.fixcolumn,#dvHeader tr td.fixcolumn").css({ left: a }); var b = $(".main-container").scrollTop() - 1; $("#dvHeader tr td").css({ top: b }) }), $(".site-logo").click(function () { misSession.validateToken(misSession.token, misSession.userabrhs) }), $(document).on({ mouseenter: function () { $(this).tooltip("show") }, mouseeleave: function () { $(this).tooltip("hide") } }, "[data-toggle='tooltip']") }); var misCrypto = function () { return { encode: function (a) { var b, c, d, e, f, g = "", h = "", j = "", k = 0; do b = a.charCodeAt(k++), c = a.charCodeAt(k++), h = a.charCodeAt(k++), d = b >> 2, e = (3 & b) << 4 | c >> 4, f = (15 & c) << 2 | h >> 6, j = 63 & h, isNaN(c) ? f = j = 64 : isNaN(h) && (j = 64), g = g + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f) + "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(j), b = c = h = "", d = e = f = j = ""; while (k < a.length); return g }, decode: function (a) { var b, c, d, e, f, g = "", h = "", j = "", k = 0, l = /[^A-Za-z0-9\+\/\=]/g; l.exec(a) && misAlert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."), a = a.replace(/[^A-Za-z0-9\+\/\=]/g, ""); do d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)), e = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)), f = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)), j = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(k++)), b = d << 2 | e >> 4, c = (15 & e) << 4 | f >> 2, h = (3 & f) << 6 | j, g += String.fromCharCode(b), 64 != f && (g += String.fromCharCode(c)), 64 != j && (g += String.fromCharCode(h)), b = c = h = "", d = e = f = j = ""; while (k < a.length); return g } } }(); function redirectToURL(a) { a && (window.location.href = a) } function downloadExcel(a) { try { 1 > $("#hidden-excel-form").length && $("<form>").attr({ method: "POST", id: "hidden-excel-form", action: a }).appendTo("body"), $("head").append("<META http-equiv==\"Authorization\" content=\"Token " + misSession.token + "\">"), $("#hidden-excel-form").bind("submit"), $("#hidden-excel-form").submit() } catch (a) { } } function downloadFileFromBase64(a, b) { var c = document.createElement("a"); c.setAttribute("href", b), c.setAttribute("download", a), c.style.display = "none", document.body.appendChild(c), c.click(), document.body.removeChild(c) } function getBase64(a) { var b = new FileReader; b.readAsDataURL(a), b.onload = function () { return b.result }, b.onerror = function (a) { return a } } function debugMis() { } function alertMis(a) { misAlert(a || "MIS Alert") } function misError() { misAlert("Your request cannot be processed, please try after some time or contact to MIS team for further assistance.", "Error", "error") } function calltoAjax(a, b, c, d, e, f, g) { var h = misSession.token, i = misSession.userabrhs; h && i ? callToAjaxWithHeader(a, b, c, { Token: h, UserAbrhs: i }, d, e, f, g) : (misSession.logout(), redirectToURL(misAppUrl.login)) } function callToAjaxWithHeader(a, b, c, d, e, f, g, h) { $.ajax({ type: b, contentType: h || "application/json; charset=utf-8", url: a, headers: d || {}, data: "undefined" != typeof c && null !== c && "" !== c ? JSON.stringify(c) : {}, dataType: "json", beforeSend: function () { $.blockUI() }, success: function (a, b, c) { "function" == typeof e && e(a, b, c), $.unblockUI() }, error: function (a, b, c) { return 500 === a.status ? (misCountdownAlert(c, "Need MIS Support", "warning", function () { redirectToURL(misAppUrl.error) }, !1, 20), !1) : 0 === a.status || 400 === a.status || 503 === a.status ? (misCountdownAlert(c, "Service Unavailable", "warning", function () { redirectToURL(misAppUrl.maintenance) }, !1, 10), !1) : void ("function" == typeof f ? f(a, b, c) : 401 === a.status ? (misSession.logout(), -1 < window.location.pathname.toLowerCase().indexOf("login") || misCountdownAlert("Your session has timed out. Please sign in again", "Session Expired", "warning", function () { redirectToURL(misAppUrl.login) }, !1, 5)) : (console.log("Error status: " + a.status + c + ": " + ("undefined" == typeof a.responseJSON ? c : a.responseJSON.MessageDetail)), misError())) } }).done(function (a, b, c) { "function" == typeof g && g(a, b, c), $.unblockUI() }) } function calltoAjaxWithoutLoader(a, b, c, d, e, f, g) { var h = misSession.token, i = misSession.userabrhs; h && i ? callToAjaxWithHeaderWithoutLoader(a, b, c, { Token: h, UserAbrhs: i }, d, e, f, g) : (misSession.logout(), redirectToURL(misAppUrl.login)) } function callToAjaxWithHeaderWithoutLoader(a, b, c, d, e, f, g, h) { $.ajax({ type: b, contentType: h || "application/json; charset=utf-8", url: a, headers: d || {}, data: "undefined" != typeof c && null !== c && "" !== c ? JSON.stringify(c) : {}, dataType: "json", success: function (a, b, c) { "function" == typeof e && e(a, b, c) }, error: function (a, b, c) { return 500 === a.status ? (misCountdownAlert(c, "Need MIS Support", "warning", function () { redirectToURL(misAppUrl.error) }, !1, 20), !1) : 0 === a.status || 400 === a.status || 503 === a.status ? (misCountdownAlert(c, "Service Unavailable", "warning", function () { redirectToURL(misAppUrl.maintenance) }, !1, 10), !1) : void ("function" == typeof f ? f(a, b, c) : 401 === a.status ? (misSession.logout(), -1 < window.location.pathname.toLowerCase().indexOf("login") || misCountdownAlert("Your session has timed out. Please sign in again", "Session Expired", "warning", function () { redirectToURL(misAppUrl.login) }, !1, 5)) : (console.log("Error status: " + a.status + c + ": " + ("undefined" == typeof a.responseJSON ? c : a.responseJSON.MessageDetail)), misError())) } }).done(function (a, b, c) { "function" == typeof g && g(a, b, c) }) } function calltoAjaxAnonymous(a, b, c, d, e, f, g) { $.ajax({ type: b, contentType: g || "application/json; charset=utf-8", url: a, data: "undefined" != typeof c && null !== c && "" !== c ? JSON.stringify(c) : {}, dataType: "json", beforeSend: function () { $.blockUI() }, success: function (a, b, c) { "function" == typeof d && d(a, b, c), $.unblockUI() }, error: function (a, b, c) { "function" == typeof e ? e(a, b, c) : (console.log("Anonymous Error status: " + a.status + c + ": " + ("undefined" == typeof a.responseJSON ? c : a.responseJSON.MessageDetail)), misError()) } }).done(function (a, b, c) { "function" == typeof f && f(a, b, c), $.unblockUI() }) } function calltoAjaxSync(a, b, c, d, e, f, g) { var h = misSession.token, i = misSession.userabrhs; h && i ? callToAjaxWithHeaderSync(a, b, c, { Token: h, UserAbrhs: i }, d, e, f, g) : (misSession.logout(), redirectToURL(misAppUrl.login)) } function callToAjaxWithHeaderSync(a, b, c, d, e, f, g, h) { $.ajax({ type: b, contentType: h || "application/json; charset=utf-8", url: a, headers: d || {}, data: "undefined" != typeof c && null !== c && "" !== c ? JSON.stringify(c) : {}, dataType: "json", async: !1, success: function (a, b, c) { "function" == typeof e && e(a, b, c) }, error: function (a, b, c) { return (401 === a.status && (misSession.logout(), !(-1 < window.location.pathname.toLowerCase().indexOf("login")) && misCountdownAlert("Your session has timed out. Please sign in again", "Session Expired", "warning", function () { redirectToURL(misAppUrl.login) }, !1, 5)), 0 === a.status || 400 === a.status || 503 === a.status) ? (redirectToURL(misAppUrl.maintenance), !1) : void (console.log(c + ": " + ("undefined" == typeof a.responseJSON ? c : a.responseJSON.MessageDetail)), misError(), "function" == typeof f && f(a, b, c)) } }).done(function (a, b, c) { "function" == typeof g && g(a, b, c) }) } function showWait() { $(".blockOverlay").css("display", "block") } function hideWait() { $(".blockOverlay").css("display", "none") } function showLoader(a, b) { var c = !0 === b ? "<tr id=\"dotLoadingContainer\" class=\"col-md-12\"><td style=\"border:none;\">#</td></tr>" : "<div id=\"dotLoadingContainer\">#</div>"; "undefined" != typeof a && $("#" + a).append(c.replace("#", "<img src=\"../../img/dot-loader.gif\" style=\"display: block;margin-left:auto;margin-right:auto;\" />")) } function hideLoader(a) { "undefined" != typeof a && $("#" + a).empty() } function setFooter() { var a = $(window).height(); $(".main").css({ "min-height": a - 191 }) } function setTestFooter() { var a = $(window).height(); $(".main").css({ "min-height": a - 141 }) } function misAlert(a, b, c, d, e) { swal({ title: b || "Oops...", text: a || "Something went wrong!", type: c || "error", html: !0, allowOutsideClick: !1 !== e, allowEscapeKey: !1 !== e, closeOnCancel: !1 !== e }, function (a) { "function" == typeof d && d(a) }) } function misCountdownAlert(a, b, c, d, e, f) { var g, h = f || 5, i = i || ""; a && (i = a + "...#1"), swal({ title: b || "Oops...", text: i.replace(/#1/, h), type: c || "error", timer: 1e3 * h, html: !0, allowOutsideClick: !1 !== e, allowEscapeKey: !1 !== e, showConfirmButton: !0 }, function (a) { "function" == typeof d && d(a) }), g = setInterval(function () { h-- , 0 > h && clearInterval(g), $(".sweet-alert > p").html(i.replace(/#1/, h)) }, 1e3) } function misConfirm(a, b, c, d, e, f, g) { swal({ title: b || "Are you sure?", text: a || "Are you sure you want to do this?", type: g || "warning", showCancelButton: !0, confirmButtonClass: "btn-danger", confirmButtonText: "Yes", cancelButtonText: "No", closeOnCancel: !0, allowOutsideClick: !0 === d, allowEscapeKey: !0 === d, closeOnConfirm: !0 === f, html: !0 === e }, function (a) { "function" == typeof c && c(a) }) } function getBrowserInfo() { var a, b, c, d = navigator.appVersion, e = navigator.userAgent, f = navigator.appName, g = "" + parseFloat(navigator.appVersion), h = parseInt(navigator.appVersion, 10); -1 == (b = e.indexOf("Opera")) ? -1 == (b = e.indexOf("MSIE")) ? -1 == (b = e.indexOf("Chrome")) ? -1 == (b = e.indexOf("Safari")) ? -1 == (b = e.indexOf("Firefox")) ? (a = e.lastIndexOf(" ") + 1) < (b = e.lastIndexOf("/")) && (f = e.substring(a, b), g = e.substring(b + 1), f.toLowerCase() == f.toUpperCase() && (f = navigator.appName)) : (f = "Firefox", g = e.substring(b + 8)) : (f = "Safari", g = e.substring(b + 7), -1 != (b = e.indexOf("Version")) && (g = e.substring(b + 8))) : (f = "Chrome", g = e.substring(b + 7)) : (f = "Microsoft Internet Explorer", g = e.substring(b + 5)) : (f = "Opera", g = e.substring(b + 6), -1 != (b = e.indexOf("Version")) && (g = e.substring(b + 8))), -1 != (c = g.indexOf(";")) && (g = g.substring(0, c)), -1 != (c = g.indexOf(" ")) && (g = g.substring(0, c)), h = parseInt("" + g, 10), isNaN(h) && (g = "" + parseFloat(navigator.appVersion), h = parseInt(navigator.appVersion, 10)); var i = "Browser name  = " + f + "<br>Full version  = " + g + "<br>Major version = " + h + "<br>navigator.appName = " + navigator.appName + "<br>navigator.userAgent = " + navigator.userAgent + "<br>"; return { info: i, name: f, fullVersion: g, majorVersion: h, navigatorAppName: navigator.appName, navigatorUserAgent: navigator.userAgent } } function isNumber(a) { a = a ? a : window.event; var b = a.which ? a.which : a.keyCode; return !(31 < b && (48 > b || 57 < b)) } $(document).on("keyup keydown", ".minMaxValidate", function (a) { validateMinMax(this, a) }); function validateMinMax(a, b) { var c = parseInt($(a).attr("data-attr-min")), d = parseInt($(a).attr("data-attr-max")); 46 != b.keyCode && 8 != b.keyCode && (parseInt($(a).val()) > d ? (b.preventDefault(), $(a).val(d)) : parseInt($(a).val()) < c && (b.preventDefault(), $(a).val(c))) } function scrollToId(a) { var b = $("#" + a); "undefined" != typeof b && "" != b && $("html, body").animate({ scrollTop: $(b).offset() ? $(b).offset().top - 95 : 0 }, 1300).promise().then(function () { $(b).focus() }) } function isValidDate(b) { var a = new Date(b); return "Invalid Date" != a } function isValidJson(a) { try { JSON.parse(a) } catch (a) { return !1 } return !0 } function toddMMMyyy(a) { return a && null != a && "Invalid Date" != new Date(a) ? moment(a).format("DD MMM YYYY") : "" } function toddmmyyyDatePicker(a) { return a && null != a && "Invalid Date" != new Date(a) ? moment(a).format("MM/DD/YYYY") : "" } function toddMMMYYYYHHMMSSAP(a) { return a && null != a && "Invalid Date" != new Date(a) ? moment(a).format("DD MMM YYYY hh:mm:ss a") : "" } function toDate(a) { return a && null != a && "Invalid Date" != new Date(a) ? new Date(moment(a).format("DD MMM YYYY")) : "" } var toHHMM = function (a) { if (a && null != a) { var b = Math.floor(a / 3600), c = Math.floor((a - 3600 * b) / 60), d = 10 > b ? "0" + b : b; return d += ":" + (10 > c ? "0" + c : c), d } return "00:00" }; function getAlphabet(a, b) { if (!isNaN(a) && (-1 < a || 26 > a)) return b && !0 === b ? String.fromCharCode(65 + a) : String.fromCharCode(97 + a) } function isKeyValExist(a, b, c) { var d = -1; return $.each(c, function (c, e) { if (e[a].toString() == b.toString()) return d = c, !1 }), -1 < d } function isMultiKeyValExist(a, b) { var c = !1; return $.each(b, function (b, d) { var e = 0; if ($.each(Object.keys(a), function (b, c) { var f = isKeyValExist(c, a[c], [d]); f && e++ }), Object.keys(a).length === e) return c = !0, !1 }), c } function getMatchedObject(a, b) { var c = []; return $.each(b, function (b, d) { var e = 0; if ($.each(Object.keys(a), function (b, c) { var f = isKeyValExist(c, a[c], [d]); f && e++ }), Object.keys(a).length === e) return c = d, !1 }), c } function getAllMatchedObject(a, b) { var c = []; return $.each(b, function (b, d) { var e = 0; $.each(Object.keys(a), function (b, c) { var f = isKeyValExist(c, a[c], [d]); f && e++ }), Object.keys(a).length === e && c.push(d) }), c } function getAllUnmatchedObject(a, b) { var c = []; return $.each(b, function (b, d) { var e = 0; $.each(Object.keys(a), function (b, c) { var f = isKeyValExist(c, a[c], [d]); f || e++ }), Object.keys(a).length === e && c.push(d) }), c } function pickProperties(a, b) { return b.map(b => b in a ? { [b]: a[b] } : {}).reduce((a, b) => Object.assign(a, b), {}) } function rejectProperties(a, b) { return Object.keys(a).filter(a => !b.includes(a)).map(b => Object.assign({}, { [b]: a[b] })).reduce((a, b) => Object.assign(a, b), {}) } function pickPropertiesAndGetObjects(a, b) { var c = []; return $.each(a, function (a, d) { c.push(pickProperties(d, b)) }), c } function rejectPropertiesAndGetObjects(a, b) { var c = []; return $.each(a, function (a, d) { c.push(rejectProperties(d, b)) }), c } function getFileExtension(a) { var b = a.substring(a.lastIndexOf(".") + 1); return b } function trimExtension(a) { return a.substring(0, a.lastIndexOf(".")) } String.prototype.trimStartAndEnd = function () { return this.replace(/^\s+|\s+$/gm, "").replace(/^\s+|\s+$/gm, "") }, String.prototype.trimString = function () { return this.replace(/\s\s+/gm, " ").replace(/^\s+|\s+$/gm, "") }, String.prototype.trimAll = function () { return this.replace(/^\s+|\s+/gm, "") }, String.prototype.formatWithSpace = function () { return this.replace(/([A-Z])/g, " $1").trim() }, String.prototype.strim = function (a) { if ("" !== a && null !== a) { for (var b = this; 0 === b.indexOf(a);)b = b.substr(a.length); for (; b.length === b.lastIndexOf(a) + a.length;)b = b.slice(0, b.length - a.length); return b } return a }; function isEmpty(a) { for (var b in a) if (a.hasOwnProperty(b)) return !1; return JSON.stringify(a) === JSON.stringify({}) } function isArray(a) { return !(a.constructor !== Array) } $.fn.serializeObject = function () { var b = {}, c = this.serializeArray(); return $.each(c, function () { void 0 === b[this.name] ? b[this.name] = this.value || "" : (!b[this.name].push && (b[this.name] = [b[this.name]]), b[this.name].push(this.value || "")) }), b }, $.fn.addHiddenInput = function (a, b) { var c = $("<input type=\"hidden\" id=\"" + a + "\" name=\"" + a + "\" />"); c.val(b), $(this).find("[type=hidden][name=" + a + "]").remove(), $(this).append(c) }, $.fn.addHiddenInputData = function (b) { var c = {}, e = function (b, a) { for (var d in b) { var g = b[d]; if (a) var h = a + "[" + d + "]"; else var h = d; "object" == typeof g ? e(g, h) : c[h] = g } }; e(b); var a = $(this); for (var d in c) a.addHiddenInput(d, c[d]) }; function validateControls(b) { $(function () { $("#" + b + " .validation-required").change(function () { var a = $(this), b = a.prop("tagName"); "TEXTAREA" == b || "INPUT" == b ? "" == a.val().trim() || "0:00" == a.val() ? a.addClass("error-validation") : a.removeClass("error-validation") : (b = a.hasClass("select-validate")) ? 0 == a.val() ? (c = !1, a.addClass("error-validation")) : a.removeClass("error-validation") : (b = a.hasClass("select2")) ? 0 == a.val() ? (c = !1, a.closest("div").find(".select2-selection").addClass("error-validation")) : a.closest("div").find(".select2-selection").removeClass("error-validation") : (b = a.hasClass("multipleSelect")) && ("undefined" == typeof a.find("option:selected").val() ? (c = !1, a.closest("div").find(".btn-group>.multiselect").addClass("error-validation")) : a.closest("div").find(".btn-group>.multiselect").removeClass("error-validation")) }), $("#" + b + " .validation-required").keyup(function () { var a = $(this), b = a.prop("tagName"); "TEXTAREA" == b || "INPUT" == b ? "" == a.val().trim() || "0:00" == a.val() ? a.addClass("error-validation") : a.removeClass("error-validation") : (b = a.hasClass("select-validate")) ? 0 == a.val() ? (c = !1, a.addClass("error-validation")) : a.removeClass("error-validation") : (b = a.hasClass("select2")) ? 0 == a.val() ? (c = !1, a.closest("div").find(".select2-selection").addClass("error-validation")) : a.closest("div").find(".select2-selection").removeClass("error-validation") : (b = a.hasClass("multipleSelect")) && ("undefined" == typeof a.find("option:selected").val() ? (c = !1, a.closest("div").find(".btn-group>.multiselect").addClass("error-validation")) : a.closest("div").find(".btn-group>.multiselect").removeClass("error-validation")) }) }); var c = !0, d = $("#" + b + " .validation-required"); return d.each(function () { var a = $(this), b = a.prop("tagName"); "TEXTAREA" == b || "INPUT" == b ? "" == a.val().trim() || "0:00" == a.val() ? (c = !1, a.addClass("error-validation")) : a.removeClass("error-validation") : (b = a.hasClass("select-validate")) ? 0 == a.val() ? (c = !1, a.addClass("error-validation")) : a.removeClass("error-validation") : (b = a.hasClass("select2")) ? 0 == a.val() ? (c = !1, a.closest("div").find(".select2-selection").addClass("error-validation")) : a.closest("div").find(".select2-selection").removeClass("error-validation") : (b = a.hasClass("multipleSelect")) && ("undefined" == typeof a.find("option:selected").val() ? (c = !1, a.closest("div").find(".btn-group>.multiselect").addClass("error-validation")) : a.closest("div").find(".btn-group>.multiselect").removeClass("error-validation")) }), c } var misSession = { userabrhs: sessionStorage["misSession.userabrhs"], username: sessionStorage["misSession.username"], displayname: sessionStorage["misSession.displayname"], userrole: sessionStorage["misSession.userrole"], roleid: sessionStorage["misSession.roleid"], company: sessionStorage["misSession.company"], companyid: sessionStorage["misSession.companyid"], companylocation: sessionStorage["misSession.companylocation"], companylocationid: sessionStorage["misSession.companylocationid"], countryid: sessionStorage["misSession.countryid"], stateid: sessionStorage["misSession.stateid"], cityid: sessionStorage["misSession.cityid"], currentappraisalcycleid: sessionStorage["misSession.currentappraisalcycleid"], goalcycleid: sessionStorage["misSession.goalcycleid"], fystartdate: sessionStorage["misSession.fystartdate"], fyenddate: sessionStorage["misSession.fyenddate"], fystartyear: sessionStorage["misSession.fystartyear"], currentquarter: sessionStorage["misSession.currentquarter"], token: sessionStorage["misSession.token"], imagePath: sessionStorage["misSession.imagePath"], apiVersion: sessionStorage["misSession.apiVersion"], menus: "undefined" == typeof sessionStorage["misSession.menus"] ? "" : $.parseJSON(sessionStorage["misSession.menus"]), authenticate: function (a, b, c) { misSession.token && misSession.userabrhs ? misSession.validateToken(misSession.token, misSession.userabrhs) : a && b ? misSession.login(a, b, c) : (misSession.logout(), redirectToURL(misAppUrl.login)) }, getKey: function (a, b) { return a && b ? "Basic " + misCrypto.encode([a, b].join(":")) : "" }, login: function (a, b, c, d) { var e = [getBrowserInfo().name, getBrowserInfo().fullVersion].join(" "), f = localStorage.getItem("clientInfo"); a && b ? callToAjaxWithHeader(misApiUrl.authenticate, "POST", null, { Authorization: misSession.getKey(a, b), BrowserInfo: e, ClientInfo: "null" == f ? "" : f }, function (b, c, d) { misSession.logout(), 200 == d.status ? (misSession.token = b.Token, sessionStorage["misSession.token"] = misSession.token, misSession.userabrhs = b.UserAbrhs, sessionStorage["misSession.userabrhs"] = misSession.userabrhs, misSession.username = a, sessionStorage["misSession.username"] = misSession.username, redirectToURL(misAppUrl.home)) : misAlert(d.statusText) }, function (a, b, c) { "function" == typeof d ? d(a, b, c) : (console.log(c + ": " + ("undefined" == typeof a.responseJSON ? c : a.responseJSON.MessageDetail)), misError()) }) : misSession.token && misSession.userabrhs ? misSession.validateToken(misSession.token, misSession.userabrhs) : misSession.logout() }, ping: function () { misSession.token && misSession.userabrhs ? calltoAjax(misApiUrl.ping, "GET", null, function (a, b, c) { return !!(200 == c.status && a.IsAlive) || (misSession.logout(), -1 < window.location.pathname.toLowerCase().indexOf("login") || misCountdownAlert("Your session has timed out. Please sign in again", "Session Expired", "warning", function () { redirectToURL(misAppUrl.login) }, !1, 5), !1) }) : misSession.logout() }, validateToken: function (a, b) { a && b && callToAjaxWithHeader(misApiUrl.userInfo, "POST", null, { Token: a, UserAbrhs: b }, function (a, b, c) { 200 == c.status ? (misSession.username = a.UserName, sessionStorage["misSession.username"] = misSession.username, misSession.displayname = a.DisplayName, sessionStorage["misSession.displayname"] = misSession.displayname, misSession.userrole = a.Role, sessionStorage["misSession.userrole"] = misSession.userrole, misSession.roleid = a.RoleId, sessionStorage["misSession.roleid"] = misSession.roleid, misSession.company = a.Company, sessionStorage["misSession.company"] = misSession.company, misSession.companyid = a.CompanyId, sessionStorage["misSession.companyid"] = misSession.companyid, misSession.companylocation = a.CompanyLocation, sessionStorage["misSession.companylocation"] = misSession.companylocation, misSession.companylocationid = a.CompanyLocationId, sessionStorage["misSession.companylocationid"] = misSession.companylocationid, misSession.countryid = a.CountryId, sessionStorage["misSession.countryid"] = misSession.countryid, misSession.stateid = a.StateId, sessionStorage["misSession.stateid"] = misSession.stateid, misSession.cityid = a.CityId, sessionStorage["misSession.cityid"] = misSession.cityid, misSession.currentappraisalcycleid = a.CurrentAppraisalCycleId, sessionStorage["misSession.currentappraisalcycleid"] = misSession.currentappraisalcycleid, misSession.goalcycleid = a.GoalCycleId, sessionStorage["misSession.goalcycleid"] = misSession.goalcycleid, misSession.fystartdate = a.FYStartDate, sessionStorage["misSession.fystartdate"] = misSession.fystartdate, misSession.fyenddate = a.FYEndDate, sessionStorage["misSession.fyenddate"] = misSession.fyenddate, misSession.fystartyear = a.FYStartYear, sessionStorage["misSession.fystartyear"] = misSession.fystartyear, misSession.currentquarter = a.CurrentQuarter, sessionStorage["misSession.currentquarter"] = misSession.currentquarter, misSession.imagePath = a.ImagePath, sessionStorage["misSession.imagePath"] = misSession.imagePath, misSession.apiVersion = a.AppVersion, sessionStorage["misSession.apiVersion"] = misSession.apiVersion, misSession.menus = a.Menus, sessionStorage["misSession.menus"] = JSON.stringify(misSession.menus), redirectToURL(misAppUrl.dashboard)) : (misAlert(c.statusText), redirectToURL(misAppUrl.login)) }) }, logout: function () { sessionStorage.removeItem("misSession.userabrhs"), misSession.userabrhs = null, sessionStorage.removeItem("misSession.username"), misSession.username = null, sessionStorage.removeItem("misSession.displayname"), misSession.displayname = null, sessionStorage.removeItem("misSession.userrole"), misSession.userrole = null, sessionStorage.removeItem("misSession.roleid"), misSession.roleid = null, sessionStorage.removeItem("misSession.company"), misSession.company = null, sessionStorage.removeItem("misSession.companyid"), misSession.companyid = null, sessionStorage.removeItem("misSession.companylocation"), misSession.companylocation = null, sessionStorage.removeItem("misSession.companylocationid"), misSession.companylocationid = null, sessionStorage.removeItem("misSession.countryid"), misSession.countryid = null, sessionStorage.removeItem("misSession.stateid"), misSession.stateid = null, sessionStorage.removeItem("misSession.cityid"), misSession.cityid = null, sessionStorage.removeItem("misSession.currentappraisalcycleid"), misSession.currentappraisalcycleid = null, sessionStorage.removeItem("misSession.goalcycleid"), misSession.goalcycleid = null, sessionStorage.removeItem("misSession.fystartdate"), misSession.fystartdate = null, sessionStorage.removeItem("misSession.fyenddate"), misSession.fyenddate = null, sessionStorage.removeItem("misSession.fystartyear"), misSession.fystartyear = null, sessionStorage.removeItem("misSession.currentquarter"), misSession.currentquarter = null, sessionStorage.removeItem("misSession.token"), misSession.token = null, sessionStorage.removeItem("misSession.apiVersion"), misSession.apiVersion = null, sessionStorage.removeItem("misSession.menus"), misSession.menus = null }, signoff: function () { misSession.logout(), redirectToURL(misAppUrl.login) }, validateAccess: function () { var a = window.location.pathname.substr(window.location.pathname.indexOf("/") + 1).split("/"), b = "", c = ""; if (0 < a.length && (b = a[a.length - a.length], c = a[a.length - 1]), "error" !== b.toLowerCase()) { var d = { ControllerName: b, ActionName: c }, e = isMultiKeyValExist(d, misSession.menus); e || redirectToURL(misAppUrl.unauthorized) } } }, misPermissions = function () { var a = window.location.pathname.substr(window.location.pathname.indexOf("/") + 1).split("/"), b = "", c = ""; 0 < a.length && (b = a[a.length - a.length], c = a[a.length - 1]); var d = { ControllerName: b, ActionName: c }, e = getMatchedObject(d, misSession.menus); return { isDelegatable: !0 === e.IsDelegatable, isDelegated: !0 === e.IsDelegated, isTabMenu: !0 === e.IsTabMenu, menuAbrhs: e.MenuAbrhs, parentMenuAbrhs: e.ParentMenuAbrhs, hasViewRights: !0 === e.IsViewRights, hasAddRights: !0 === e.IsAddRights, hasModifyRights: !0 === e.IsModifyRights, hasDeleteRights: !0 === e.IsDeleteRights, hasApproveRights: !0 === e.IsApproveRights, hasAssignRights: !0 === e.IsAssignRights, hasActionRights: !0 === e.IsViewRights && (!0 === e.IsAddRights || !0 === e.IsModifyRights || !0 === e.IsDeleteRights || !0 === e.IsApproveRights || !0 === e.IsAssignRights) } }(); function loadEmptyMultiSelect(a) { var b = $("#" + a); b.multiselect() } function destroyMultiselect(a) { var b = $("#" + a); b.empty(), b.multiselect("destroy") } function loadModal(b, a, c, d, f, g) { ("undefined" == typeof f || null == f) && (f = {}), $.ajaxSetup({ cache: !1 }); try { "boolean" == typeof g || (g = !1); var h = $("#" + b), k = $("#" + a); d && k.empty().append("<span class=\"loading\" id=\"divLoading\">Loading...</span>"), h.modal({ keyboard: g, backdrop: !1 !== g || "static" }), $.get(c, f, function (b) { k.html(b) }).done(function () { d && $("#divLoading").hide() }).error(function () { }) } catch (a) { } } function hideModal(a) { a && $("#" + a).modal("hide") } function blockContainer(a, b) { var c = { message: "<h4>" + (a || "One moment please...") + "</h4>", css: { border: "none", padding: "15px", backgroundColor: "#fff", color: "#283146", opacity: 1, "-webkit-border-radius": "4px", "-moz-border-radius": "4px", "-webkit-box-shadow": "1px 1px 7px 1px #64daf6", "box-shadow": "1px 1px 7px 1px #64daf6" }, overlayCSS: { opacity: 1, backgroundColor: "#283146", cursor: "default" } }; "undefined" == typeof b ? $.blockUI(c) : $("#" + b).block(c) } function updateBlockedContainer(a) { $($(".blockMsg h4")[0]).html(a || "One moment please...") } function unBlockContainer(a) { "undefined" == typeof a ? $.unblockUI() : $("#" + a).unblock() } function loadUrlToId(e, f, a, b) { ("undefined" == typeof b || null == b) && (b = {}), $.ajaxSetup({ cache: !1 }); try { (null == a || "undefined" == typeof a) && (a = {}), $.get(e, a, function (b) { $("#" + f).empty().append(b) }) } catch (b) { } return !1 } function loadEditorToId(a, b) { if (a) { var c = CKEDITOR.instances[a]; c && c.destroy(!0), CKEDITOR.replace(a, { height: b || 100 }) } } function loadEditorToClass(a) { if (a) { var b = $("." + a); b.length && b.each(function () { var a = $(this).attr("id"), b = CKEDITOR.instances[a]; b && b.destroy(!0), CKEDITOR.replace(a) }) } } function isNumber(a) { a = a ? a : window.event; var b = a.which ? a.which : a.keyCode; return !(31 < b && (48 > b || 57 < b)) } function printDiv(a) { Popup($("#" + a).html()) } function Popup(a) { var b = window.open("", "my div", "height=400,width=600"); return b.document.write("<html><head><title>my div</title>"), b.document.write("</head><body >"), b.document.write(a), b.document.write("</body></html>"), b.document.close(), b.focus(), b.print(), b.close(), !0 } function CheckPasswordStrength(a) { var b = document.getElementById("password_strength"); if (0 == a.length) return void (b.innerHTML = ""); var c = []; c.push("[A-Z]"), c.push("[a-z]"), c.push("[0-9]"), c.push("[$@$!%*#?&]"); for (var d = 0, e = 0; e < c.length; e++)new RegExp(c[e]).test(a) && d++; 2 < d && 8 < a.length && d++; var f = "", g = ""; 0 === d || 1 === d ? (g = "Weak", f = "red") : 2 === d ? (g = "Good", f = "darkorange") : 3 === d || 4 === d ? (g = "Strong", f = "green") : 5 === d ? (g = "Very Strong", f = "darkgreen") : void 0; b.innerHTML = g, b.style.color = f } var specialKeys = []; specialKeys.push(8), specialKeys.push(9), specialKeys.push(46), specialKeys.push(36), specialKeys.push(35), specialKeys.push(37), specialKeys.push(39); function IsAlphaNumeric(a) { var b = 0 == a.keyCode ? a.charCode : a.keyCode, c = 48 <= b && 57 >= b || 65 <= b && 90 >= b || 38 == b || 47 == b || 44 == b || 97 <= b && 122 >= b || 32 == b || 40 == b || 45 == b || 41 == b || 95 == b || -1 != specialKeys.indexOf(a.keyCode) && a.charCode != a.keyCode; return c } function IsAlphaNumericValidate(a) { var b = a; cString = $("#" + b + "").val(); var c = /[^0-9a-zA-Z\_\-\(\ )\ \&\,\/\s]/; if (!cString.match(c)); else { return misAlert("Please do not enter special characters !"), !1 } } function blockSpecialChar(a) { evt = a ? a : event; var b = evt.which || evt.charCode || evt.keyCode || 0; return 64 < b && 91 > b || 96 < b && 123 > b || 8 == b || 48 <= b && 57 >= b || 32 == b || 44 == b || 46 == b || 40 == b || 41 == b || 42 == b || 38 == b || 64 == b || 63 == b || 58 == b || 59 == b } function addElipsis(a, b) { return a.length > b && (a = a.substring(0, b) + "..."), a }