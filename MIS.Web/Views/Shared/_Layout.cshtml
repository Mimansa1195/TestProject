<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Gemini - MIS</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <link href="~/Content/lib/lobipanel.min.css?v=4.2" rel="stylesheet" />
    <link href="~/Content/lib/separate/vender/lobipanel.min.css?v=4.1" rel="stylesheet" />
    <link href="~/Content/lib/separate/widgets.min.css" rel="stylesheet" />
    <link href="~/Content/lib/jquery-ui.min.css" rel="stylesheet" />
    <link href="~/Content/lib/sweetalert.css" rel="stylesheet" />
    <link href="~/Content/lib/sweet-alert-animations.min.css" rel="stylesheet" />
    <link href="~/Content/lib/bootstrap.min.css" rel="stylesheet" />
    <link href="~/Content/lib/bootstrap-toggle.min.css" rel="stylesheet" />

    <link href="~/Content/lib/font-awesome.min.css" rel="stylesheet" />
    <link href="~/Content/lib/select2.min.css" rel="stylesheet" />
    <link href="~/Content/lib/main.css?v=1.5" rel="stylesheet" />
    <link href="~/Content/lib/datepicker.css" rel="stylesheet" />
    <link href="~/Content/lib/bootstrap-multiselect.css" rel="stylesheet" />
    <link href="~/Content/app/mis.common.css?v=2.9" rel="stylesheet" />

    <!--DataTable Styles-->
    <link href="~/Content/lib/datatable/jquery.dataTables.min.css" rel="stylesheet" asp-append-version="true" />
    <link href="~/Content/lib/datatable/buttons.dataTables.min.css" rel="stylesheet" />
    <link href="~/Content/lib/datatable/responsive.dataTables.min.css" rel="stylesheet" />

    @*<link href="~/Content/lib/datatable/datatables.min.css" rel="stylesheet" />*@
    <link href="~/Content/lib/datatable/datatables-net.min.css" rel="stylesheet" />
    <script src="~/Scripts/lib/jquery.min.js" type="text/javascript"></script>
    <script src="~/Scripts/lib/jquery-ui.min.js"></script>
    <script src="~/Scripts/lib/jquery.blockUI.min.js" type="text/javascript"></script>
    <script src="~/Scripts/lib/moment.min.js"></script>
    <script src="~/Scripts/common/mis.basepath.js?v=6.1"></script>
    <script src="~/Scripts/common/mis.common.min.js?v=4.6" type="text/javascript"></script>
    <script>
        //if (window.location.hostname !== 'localhost') {
        //    if (window.location.protocol !== 'https:') {
        //        window.location = 'https://' + window.location.hostname + (window.location.port ? ':' + window.location.port : '') + window.location.pathname + window.location.hash;
        //    }
        //}
        misSession.validateAccess();
    </script>

</head>
<body class="with-side-menu control-panel control-panel-compact">
    <header class="site-header">
        <div class="container-fluid">
            <a href="javascript: void(0)" class="site-logo">
                <img class="hidden-md-down" src="~/img/GeminiLogo-Small-Black.png" alt="">
            </a>

            <span id="show-hide-sidebar" class="checkbox-toggle">
                <input type="checkbox" id="show-hide-sidebar-toggle" checked>
                <label for="show-hide-sidebar-toggle"></label>
            </span>

            <button class="hamburger hamburger--htla">
                <span>toggle menu</span>
            </button>
            <div class="site-header-content">
                <div class="site-header-content-in">
                    <div class="site-header-shown">
                        <div class="dropdown dropdown-typical">
                            @*<a class="label label-light-grey" id="lblChangeADPassword">Change AD Password</a>*@
                            <a class="label label-light-grey" href="https://ldap.geminisolutions.com" target="_blank">Change AD Password</a>
                        </div>

                        @*<div class="dropdown dropdown-notification notif">
                                <a href="#" class="header-alarm dropdown-toggle active" id="dd-notification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="font-icon-alarm"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-notif" aria-labelledby="dd-notification">
                                    <div class="dropdown-menu-notif-header">
                                        Notifications
                                        <span class="label label-pill label-danger">1</span>
                                    </div>
                                    <div class="dropdown-menu-notif-list">
                                        <div class="dropdown-menu-notif-item">
                                            <div class="photo">
                                                <img src="#" alt="">
                                            </div>
                                            <div class="dot"></div>
                                            <a href="#">Morgan</a> was bothering about something
                                            <div class="color-blue-grey-lighter">7 hours ago</div>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu-notif-more">
                                        <a href="#">See more</a>
                                    </div>
                                </div>
                            </div>

                            <div class="dropdown dropdown-notification messages">
                                <a href="#" class="header-alarm dropdown-toggle active" id="dd-messages" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="font-icon-mail"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right dropdown-menu-messages" aria-labelledby="dd-messages">
                                    <div class="dropdown-menu-messages-header">
                                        <ul class="nav" role="tablist">
                                            <li class="nav-item">
                                                <a class="nav-link active" data-toggle="tab" href="#tab-incoming" role="tab">Inbox<span class="label label-pill label-danger">1</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="nav-link" data-toggle="tab" href="#tab-outgoing" role="tab">Outbox</a>
                                            </li>
                                        </ul>
                                    </div>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab-incoming" role="tabpanel">
                                            <div class="dropdown-menu-messages-list">
                                                <a href="#" class="mess-item">
                                                    <span class="avatar-preview avatar-preview-32"><img src="#" alt=""></span>
                                                    <span class="mess-item-name">Tim Collins</span>
                                                    <span class="mess-item-txt">Morgan was bothering about something!</span>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="tab-outgoing" role="tabpanel">
                                            <div class="dropdown-menu-messages-list">
                                                <a href="#" class="mess-item">
                                                    <span class="avatar-preview avatar-preview-32"><img src="#" alt=""></span>
                                                    <span class="mess-item-name">Christian Burton</span>
                                                    <span class="mess-item-txt">Morgan was bothering about something! Morgan was bothering about something...</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="dropdown-menu-notif-more">
                                        <a href="#">See more</a>
                                    </div>
                                </div>
                            </div>*@

                        <div class="dropdown user-menu">
                            <button class="dropdown-toggle" id="dd-user-menu" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="" alt="" id="userImage"><span id="LoginUserName"></span>
                            </button>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dd-user-menu">
                                <a class="dropdown-item" id="updateProfile"><span class="font-icon glyphicon glyphicon-user"></span>Profile</a>
                                <a class="dropdown-item" id="dashBoardSettings"><span class="font-icon glyphicon glyphicon-cog"></span>Dashboard Settings</a>
                                <a class="dropdown-item" id="skills"><span class="font-icon glyphicon glyphicon-signal"></span>Skills</a>
                                @*<a class="dropdown-item" id="helpDoc"><span class="font-icon glyphicon glyphicon-question-sign"></span>Help</a>*@
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="javascript:misSession.signoff();"><span class="font-icon glyphicon glyphicon-log-out"></span>Logout</a>
                            </div>
                        </div>
                        <button type="button" class="burger-right">
                            <i class="font-icon-menu-addl"></i>
                        </button>
                    </div><!--.site-header-shown-->

                    <div class="mobile-menu-right-overlay"></div>
                    <div class="site-header-collapsed">

                    </div><!--.site-header-collapsed-->
                </div><!--site-header-content-in-->
                <div id="divChangeADPassword" class="pull-right">
                    <div class="container margin-top-10">
                        <div class="row form-group">
                            <div class="col-md-6"><label class="control-label lbl-right">Domain Username</label></div>
                            <div class="col-md-6"><input type="text" autocomplete="off" disabled class="form-control validation-required" id="txtADUsername" name="txtADUsername" /></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-6"><label class="control-label lbl-right">Current Password</label></div>
                            <div class="col-md-6"><input type="password" autocomplete="off" class="form-control validation-required" id="txtCurrentPass" /></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-6"><label class="control-label lbl-right">New Password</label></div>
                            <div class="col-md-6"><input type="password" autocomplete="off" class="form-control validation-required" id="txtNewPass" /></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-6"><label class="control-label lbl-right">Confirm New Password</label></div>
                            <div class="col-md-6"><input type="password" autocomplete="off" class="form-control validation-required" id="txtConfirmNewPass" /></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-12" id="divAlert" style="display:none;"><label class="text-danger">Your Domain Username is not available. Please contact to MIS Team.</label></div>
                            <div class="col-md-12" id="divADChangeBtn" style="display:none;"><button type="button" id="btnChangeADPass" class="btn btn-outline-success pull-right">Submit</button></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-md-12" id="divAlertError" style="display:none;"><label class="text-danger">New password and confirm password does not match.</label></div>
                        </div>
                    </div>
                </div>
            </div><!--.site-header-content-->

        </div><!--.container-fluid-->
    </header><!--.site-header-->
    <div class="mobile-menu-left-overlay"></div>
    <nav class="side-menu">
        <div id="navMenu"></div>
    </nav>
    <!--.side-menu-->
    <div class="page-content">
        @RenderBody()
    </div><!--.page-content-->
    @*<div class="control-panel-container">
            <ul>
                <li class="tasks">
                    <div class="control-item-header">
                        <a href="#" class="icon-toggle">
                            <span class="caret-down fa fa-caret-down"></span>
                            <span class="icon fa fa-tasks"></span>
                        </a>
                        <span class="text">Task list</span>
                        <div class="actions">
                            <a href="#">
                                <span class="fa fa-refresh"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-cog"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-trash"></span>
                            </a>
                        </div>
                    </div>
                    <div class="control-item-content">
                        <div class="control-item-content-text">You don't have pending tasks.</div>
                    </div>
                </li>
                <li class="sticky-note">
                    <div class="control-item-header">
                        <a href="#" class="icon-toggle">
                            <span class="caret-down fa fa-caret-down"></span>
                            <span class="icon fa fa-file"></span>
                        </a>
                        <span class="text">Sticky Note</span>
                        <div class="actions">
                            <a href="#">
                                <span class="fa fa-refresh"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-cog"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-trash"></span>
                            </a>
                        </div>
                    </div>
                    <div class="control-item-content">
                        <div class="control-item-content-text">

                        </div>
                    </div>
                </li>
                <li class="emails">
                    <div class="control-item-header">
                        <a href="#" class="icon-toggle">
                            <span class="caret-down fa fa-caret-down"></span>
                            <span class="icon fa fa-envelope"></span>
                        </a>
                        <span class="text">Recent e-mails</span>
                        <div class="actions">
                            <a href="#">
                                <span class="fa fa-refresh"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-cog"></span>
                            </a>
                            <a href="#">
                                <span class="fa fa-trash"></span>
                            </a>
                        </div>
                    </div>
                    <div class="control-item-content">
                        <section class="control-item-actions">
                            <a href="#" class="link">My e-mails</a>
                            <a href="#" class="mark">Mark visible as read</a>
                        </section>
                        <ul class="control-item-lists">
                            <li>
                                <a href="#">
                                    <h6>Welcome to the Community!</h6>
                                    <div>Hi, welcome to the my app...</div>
                                    <div>
                                        Message text
                                    </div>
                                </a>
                                <a href="#" class="reply-all">Reply all</a>
                            </li>
                            <li>
                                <a href="#">
                                    <h6>Welcome to the Community!</h6>
                                    <div>Hi, welcome to the my app...</div>
                                    <div>
                                        Message text
                                    </div>
                                </a>
                                <a href="#" class="reply-all">Reply all</a>
                            </li>
                            <li>
                                <a href="#">
                                    <h6>Welcome to the Community!</h6>
                                    <div>Hi, welcome to the my app...</div>
                                    <div>
                                        Message text
                                    </div>
                                </a>
                                <a href="#" class="reply-all">Reply all</a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li class="add">
                    <div class="control-item-header">
                        <a href="#" class="icon-toggle no-caret">
                            <span class="icon fa fa-plus"></span>
                        </a>
                    </div>
                </li>
            </ul>
            <a class="control-panel-toggle">
                <span class="fa fa-angle-double-left"></span>
            </a>
        </div>*@

    <div id="myModalDashBoardSettings" class="modal fade" role="dialog" aria-labelledby="myModalDashBoardSettings" aria-hidden="true">
        <div class="modal-dialog modal-lg" id="DashBoardSettings">

        </div>
    </div>

    <div id="mypopupUpdateSkills" class="modal fade" role="dialog" aria-labelledby="mypopupUpdateSkills" aria-hidden="true">
        <div class="modal-dialog" id="skillsSettings">

        </div>
    </div>

    <div id="mypopupHelpDoc" class="modal fade" role="dialog" aria-labelledby="mypopupHelpDoc" aria-hidden="true">
        <div class="modal-dialog  modal-lg" id="helpDocument">

        </div>
    </div>

    <div id="mypopupEditSkills" class="modal fade" role="dialog" aria-labelledby="mypopupEditSkills" aria-hidden="true">
        <input type="hidden" name="name" value="" id="hdnSkillDetailId" />
        <input type="hidden" name="name" value="" id="hdnSkillTypeId" />
        <div class="modal-dialog" id="skillsSettingsEdit">

        </div>
    </div>

    <div id="mypopupUpdateProfile" class="modal fade" role="dialog" aria-labelledby="mypopupUpdateProfile" aria-hidden="true">
        <div class="modal-dialog" id="divUpdateProfile">

        </div>
    </div>

    <div id="mypopupUserDelegation" class="modal fade" role="dialog" aria-labelledby="mypopupUserDelegation" aria-hidden="true">
        <div class="modal-dialog" id="divUserDelegation">

        </div>
    </div>





    <script src="~/Scripts/lib/tether.min.js"></script>
    <script src="~/Scripts/lib/bootstrap.js"></script>
    <script src="~/Scripts/lib/plugins.js"></script>
    <script src="~/Scripts/lib/jquery.ui.position.min.js"></script>
    <script src="~/Scripts/lib/lobipanel.min.js"></script>
    <script src="~/Scripts/lib/jquery.matchHeight.js"></script>
    <script src="~/Scripts/lib/app.js"></script>
    <script src="~/Scripts/lib/sweetalert.min.js"></script>
    <script src="~/Scripts/lib/bootstrap-datepicker.min.js"></script>
    <script src="~/Scripts/lib/bootstrap-toggle.min.js"></script>

    <!--DataTable Scripts-->
    <script src="~/Scripts/lib/datatable/datatables.min.js"></script>

    <script src="~/Scripts/lib/datatable/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/lib/datatable/dataTables.buttons.min.js"></script>
    <script src="~/Scripts/lib/datatable/pdfmake.min.js"></script>
    <script src="~/Scripts/lib/datatable/vfs_fonts.js"></script>
    <script src="~/Scripts/lib/datatable/buttons.html5.min.js"></script>
    <script src="~/Scripts/lib/datatable/buttons.print.min.js"></script>
    <script src="~/Scripts/lib/datatable/dataTables.responsive.min.js"></script>
    <script src="~/Scripts/lib/datatable/dataTables.bootstrap.min.js"></script>
    <script src="~/Scripts/lib/datatable/buttons.colVis.js?v"></script>
    @*<script src="~/Scripts/lib/datatable/datatables.date-eu.js"></script>*@

    <script src="~/Scripts/lib/bootstrap-multiselect.js"></script>
    <script src="~/Scripts/lib/select2.min.js"></script>
    <script src="~/Scripts/common/mis.layout.js?v=2.6"></script>
    <script src="~/Scripts/lib/underscore-min.js"></script>
    <script>
        $(document).ready(function () {
            //$(document).ajaxStart($.blockUI).ajaxError($.unblockUI).ajaxStop($.unblockUI);
            $(document).ajaxError($.unblockUI).ajaxStop($.unblockUI);
            misLayout.init();

            $("#lblChangeADPassword").click(function () {
                $('#divChangeADPassword').toggle("slow");
                $("#txtADUsername").val("");
                $("#txtCurrentPass").val("");
                $("#txtNewPass").val("");
                $("#txtConfirmNewPass").val("");
                getADUserName();
            });
        });

        function getADUserName() {
            calltoAjax(misApiUrl.getADUserName, "POST", "",
                function (result) {
                    if (result !== null && result !== "") {

                        $("#txtADUsername").val("");
                        $("#txtADUsername").val(result);
                        $("#txtADUsername").attr("disabled", true);
                        $("#divADChangeBtn").show();
                        $("#divAlert").hide();
                    }
                    else {
                        $("#divADChangeBtn").hide();
                        $("#divAlert").show();
                    }
                });
        }

        $("#btnChangeADPass").click(function () {
            if (!validateControls('divChangeADPassword')) {
                return false;
            }
            var newPass = $("#txtNewPass").val();
            var confirmNewPass = $("#txtConfirmNewPass").val();

            if (!confirmADPassword(newPass, confirmNewPass)) {
                return false;
            }
            var jsonObject = {
                currntADPassword: $("#txtCurrentPass").val(),
                newADPassword: $("#txtNewPass").val()
            }
            calltoAjax(misApiUrl.changeADPassword, "POST", jsonObject, function (result) {
                if (result.IsSuccessful) {
                    $("#mypopupUpdateProfile").modal("hide");
                    misAlert('Your Domain password has been changed successfully.', 'Success', 'success');
                }
                else//error
                {
                    misAlert(result.Message, "Error", "error");
                }
            });
        });

        function confirmADPassword(newPass, confirmNewPass) {
            if (newPass != confirmNewPass) {
                $("#divAlertError").show();
                return false;
            }
            else {
                $("#divAlertError").hide();
            }
            return true;
        }

    </script>
</body>
</html>